<!DOCTYPE html>
<html lang="zh-CN">

<head>
        <link rel="canonical" href="https://omanaddress.github.io/html/category/article-3046.htm" />
    <!-- ========== Meta Tags ========== -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <!-- ========== Page Title ========== -->
    <title>gofs使用教程基于golang的开源跨平台文件同步工具 - Oman Address</title>
        <link rel="icon" href="/assets/addons/xcblog/img/omanaddress/favicon.ico" type="image/x-icon"/>

    <!-- ========== Start Stylesheet ========== -->
    <link href="/assets/addons/xcblog/css/omanaddress/bootstrap.min.css" rel="stylesheet" />
    <link href="/assets/addons/xcblog/css/omanaddress/font-awesome.min.css" rel="stylesheet" />
    <link href="/assets/addons/xcblog/css/omanaddress/themify-icons.css" rel="stylesheet" />
    <link href="/assets/addons/xcblog/css/omanaddress/flaticon-set.css" rel="stylesheet" />
    <link href="/assets/addons/xcblog/css/omanaddress/elegant-icons.css" rel="stylesheet" />
    <link href="/assets/addons/xcblog/css/omanaddress/magnific-popup.css" rel="stylesheet" />
    <link href="/assets/addons/xcblog/css/omanaddress/owl.carousel.min.css" rel="stylesheet" />
    <link href="/assets/addons/xcblog/css/omanaddress/owl.theme.default.min.css" rel="stylesheet" />
    <link href="/assets/addons/xcblog/css/omanaddress/animate.css" rel="stylesheet" />
    <link href="/assets/addons/xcblog/css/omanaddress/bootsnav.css" rel="stylesheet" />
    <link href="/assets/addons/xcblog/css/omanaddress/style.css" rel="stylesheet">
    <link href="/assets/addons/xcblog/css/omanaddress/responsive.css" rel="stylesheet" />
    <!-- ========== End Stylesheet ========== -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="/assets/addons/xcblog/js/frontend/omanaddress/html5/html5shiv.min.js"></script>
      <script src="/assets/addons/xcblog/js/frontend/omanaddress/html5/respond.min.js"></script>
    <![endif]-->

    <!-- ========== Google Fonts ========== -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200;300;400;600;700;800&display=swap" rel="stylesheet">
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?afd972d72a67e62884759c9ecd23c891";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3332997411212854"
     crossorigin="anonymous"></script>
</head>

<body>
        <!-- Header 
    ============================================= -->
    <header id="home">

        <!-- Start Navigation -->
        <nav class="navbar navbar-default attr-border navbar-sticky dark bootsnav">

            <div class="container-full">
                <!-- Start Header Navigation -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                        <i class="fa fa-bars"></i>
                    </button>
                    <a class="navbar-brand" href="/">
                            <img src="/assets/addons/xcblog/img/omanaddress/logo-s.png" class="logo" alt="Logo">
                            Oman Address
                    </a>
                </div>
                <!-- End Header Navigation -->

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="navbar-menu">
                    <ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">
                                                <li>
                            <a href="/">首页</a>
                        </li>
                                                <li>
                            <a href="/html/category/">文章分类</a>
                        </li>
                                                <li>
                            <a href="#">关于</a>
                        </li>
                        <li>
                            <a href="#">联系</a>
                        </li>
                    </ul>
                </div><!-- /.navbar-collapse -->
            </div>

        </nav>
        <!-- End Navigation -->

    </header>
    <!-- End Header -->
    <!-- Start Breadcrumb 
    ============================================= -->
    <div class="breadcrumb-area bg-gray text-center shadow dark text-light bg-cover" style="background-image: url(/assets/addons/xcblog/img/omanaddress/banner/26.jpg);">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 offset-lg-2">
                    <h1 style="word-break: break-all;">gofs使用教程基于golang的开源跨平台文件同步工具</h1>
                    <ul class="breadcrumb">
                        <li><a href="/"><i class="fas fa-home"></i> 首页</a></li>
                        <li><a href="/html/category/"> 文章分类</a></li>
                        <li class="active">正文</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End Breadcrumb -->
    <!-- Start Blog
    ============================================= -->
    <div class="blog-area single full-blog full-blog default-padding">
        <div class="container">
            <div class="row">
                <div class="col-md-9">
                    <div class="blog-items">
                        <div class="row">
                            <div class="blog-content col-lg-10 offset-lg-1 col-md-12">
                                <div class="item">
                                    <div class="blog-item-box">
                                        <!-- Start Post Thumb -->
                                        <div class="content">
                                              				  				  				<h2 id="概述">概述</h2> <p><code>gofs</code>是基于golang开发的一款开箱即用的跨平台文件同步工具，支持在本地磁盘之间同步、从远程服务器同步变更到本地、将本地文件变更推送到远程服务器三种模式。开源地址如下：<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://github.com/no-src/gofs"  target="_blank" rel="nofollow">https://github.com/no-src/gofs</a> ，欢迎Star或者提交Issue和PR！</p> <h2 id="安装">安装</h2> <p>首先需要确保已经安装了<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://golang.google.cn/doc/install"  target="_blank" rel="nofollow">Go</a> (<strong>版本必须是1.18+</strong>)，然后你就可以使用下面的命令来安装<code>gofs</code>了</p> <p>如果你不需要自行从源码编译安装，也可以直接下载最新发布的二进制文件<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://github.com/no-src/gofs/releases"  target="_blank" rel="nofollow"><img decoding="async" src="http://img.555519.xyz/uploads3/20220510/1954f285e6734a33fe9794194d3f13cc.jpg" alt="gofs使用教程基于golang的开源跨平台文件同步工具"></a></p> <pre><code class="language-bash">go install github.com/no-src/gofs/...@latest</code></pre> <h3 id="在docker中运行">在Docker中运行</h3> <p>如果你想要在docker中运行，请在安装或者编译的时候使用<code>-tags netgo</code>命令行参数或者设置环境变量<code>CGO_ENABLED=0</code>,否则当你运行docker容器时可能会报找不到<code>gofs</code>的错误</p> <pre><code class="language-bash">go install -tags netgo github.com/no-src/gofs/...@latest</code></pre> <p>你可以使用<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://github.com/no-src/gofs/tree/main/scripts/build-docker.sh"  target="_blank" rel="nofollow">build-docker.sh</a>脚本来构建docker镜像，首先你需要克隆本仓库并且<code>cd</code>到本仓库的根目录</p> <pre><code class="language-bash">$ ./scripts/build-docker.sh</code></pre> <p>或者使用以下命令直接从<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://hub.docker.com/r/nosrc/gofs"  target="_blank" rel="nofollow">DockerHub</a>中拉取docker镜像</p> <pre><code class="language-bash">$ docker pull nosrc/gofs</code></pre> <p>更多关于发布与docker的脚本参见<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://github.com/no-src/gofs/tree/main/scripts"  target="_blank" rel="nofollow">scripts</a>目录</p> <h3 id="后台运行">后台运行</h3> <p>在windows系统中，你可以使用下面的命令构建一个在后台运行的不带命令行界面的程序</p> <pre><code class="language-bat">go install -ldflags="-H windowsgui" github.com/no-src/gofs/...@latest</code></pre> <h2 id="快速开始">快速开始</h2> <h3 id="先决条件">先决条件</h3> <p>请确保文件同步的源目录和目标目录都已经存在，如果目录不存在，则用你实际的目录替换下面的路径进行提前创建</p> <pre><code class="language-bash">$ mkdir source dest</code></pre> <p>生成仅用于测试的证书和密钥文件，生产中请替换为正式的证书</p> <p>TLS证书和密钥文件仅用于与<a href="#web%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8" rel="nofollow">Web文件服务器</a>和<a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E6%9C%8D%E5%8A%A1%E7%AB%AF" rel="nofollow">远程磁盘服务端</a>进行安全通讯</p> <pre><code class="language-bash">$ go run $GOROOT/src/crypto/tls/generate_cert.go --host 127.0.0.1 2021/12/30 17:21:54 wrote cert.pem 2021/12/30 17:21:54 wrote key.pem</code></pre> <p>查看你的工作目录</p> <pre><code class="language-bash">$ ls cert.pem  key.pem  source  dest</code></pre> <h3 id="本地磁盘">本地磁盘</h3> <p>监控本地源目录将变更同步到目标目录</p> <p>你可以使用<code>logically_delete</code>命令行参数来启用逻辑删除，从而避免误删数据</p> <p>设置<code>checkpoint_count</code>命令行参数来使用文件中的检查点来减少传输未修改的文件块，默认情况下<code>checkpoint_count=10</code>，这意味着它最多有<code>10+2</code>个检查点。在头部和尾部还有两个额外的检查点。第一个检查点等于<code>chunk_size</code>，它是可选的。最后一个检查点等于文件大小，这是必需的。由<code>checkpoint_count</code>设置的检查点偏移量总是大于<code>chunk_size</code>，除非文件大小小于或等于<code>chunk_size</code>，那么<code>checkpoint_count</code>将变为<code>0</code>，所以它是可选的</p> <p>默认情况下，如果源文件的大小和修改时间与目标文件相同，则忽略当前文件的传输。你可以使用<code>force_checksum</code>命令行参数强制启用校验和来比较文件是否相等</p> <pre><code class="language-bash">$ gofs -source=./source -dest=./dest</code></pre> <h3 id="全量同步">全量同步</h3> <p>执行一次全量同步，直接将整个源目录同步到目标目录</p> <pre><code class="language-bash">$ gofs -source=./source -dest=./dest -sync_once</code></pre> <h3 id="定时同步">定时同步</h3> <p>定时执行全量同步，将整个源目录同步到目标目录</p> <pre><code class="language-bash"># 每30秒钟将源目录全量同步到目标目录 $ gofs -source=./source -dest=./dest -sync_cron="*/30 * * * * *"</code></pre> <h3 id="守护进程模式">守护进程模式</h3> <p>启动守护进程来创建一个工作进程处理实际的任务，并将相关进程的pid信息记录到pid文件中</p> <pre><code class="language-bash">$ gofs -source=./source -dest=./dest -daemon -daemon_pid</code></pre> <h3 id="web文件服务器">Web文件服务器</h3> <p>启动一个Web文件服务器用于访问远程的源目录和目标目录</p> <p>Web文件服务器默认使用HTTPS协议，使用<code>tls_cert_file</code>和<code>tls_key_file</code>命令行参数来指定相关的证书和密钥文件</p> <p>如果你不需要使用TLS进行安全通讯，可以通过将<code>tls</code>命令行参数指定为<code>false</code>来禁用它</p> <p>如果将<code>tls</code>设置为<code>true</code>，则服务器默认运行端口为<code>443</code>，反之默认端口为<code>80</code>，你可以使用<code>server_addr</code>命令行参数来自定义服务器运行端口，例如<code>-server_addr=":443"</code></p> <p>出于安全考虑，你应该设置<code>rand_user_count</code>命令行参数来随机生成指定数量的用户或者通过<code>users</code>命令行参数自定义用户信息来保证数据的访问安全，禁止用户匿名访问数据</p> <p>如果<code>rand_user_count</code>命令行参数设置大于0，则随机生成的账户密码将会打印到日志信息中，请注意查看</p> <p>如果你需要启用gzip压缩响应结果，则添加<code>server_compress</code>命令行参数，但是目前gzip压缩不是很快，在局域网中可能会影响传输效率</p> <pre><code class="language-bash"># 启动一个Web文件服务器并随机创建3个用户 # 在生产环境中请将`tls_cert_file`和`tls_key_file`命令行参数替换为正式的证书和密钥文件 $ gofs -source=./source -dest=./dest -server -tls_cert_file=cert.pem -tls_key_file=key.pem -rand_user_count=3</code></pre> <h3 id="远程磁盘服务端">远程磁盘服务端</h3> <p>启动一个远程磁盘服务端作为一个远程文件数据源</p> <p><code>source</code>命令行参数详见<a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%95%B0%E6%8D%AE%E6%BA%90%E5%8D%8F%E8%AE%AE" rel="nofollow">远程磁盘服务端数据源协议</a></p> <p>注意远程磁盘服务端的用户至少要拥有读权限，例如：<code>-users="gofs|password|r"</code></p> <p>你可以使用<code>checkpoint_count</code>命令行参数就跟<a href="#%E6%9C%AC%E5%9C%B0%E7%A3%81%E7%9B%98" rel="nofollow">本地磁盘</a>一样</p> <pre><code class="language-bash"># 启动一个远程磁盘服务端 # 在生产环境中请将`tls_cert_file`和`tls_key_file`命令行参数替换为正式的证书和密钥文件 # 为了安全起见，请使用复杂的账户密码来设置`users`命令行参数 $ gofs -source="rs://127.0.0.1:8105?mode=server&amp;local_sync_disabled=true&amp;path=./source&amp;fs_server=https://127.0.0.1" -dest=./dest -users="gofs|password|r" -tls_cert_file=cert.pem -tls_key_file=key.pem</code></pre> <h3 id="远程磁盘客户端">远程磁盘客户端</h3> <p>启动一个远程磁盘客户端将远程磁盘服务端的文件变更同步到本地目标目录</p> <p>使用<code>sync_once</code>命令行参数，可以直接将远程磁盘服务端的文件整个全量同步到本地目标目录，就跟<a href="#%E5%85%A8%E9%87%8F%E5%90%8C%E6%AD%A5" rel="nofollow">全量同步</a>一样</p> <p>使用<code>sync_cron</code>命令行参数，可以定时将远程磁盘服务端的文件整个全量同步到本地目标目录，就跟<a href="#%E5%AE%9A%E6%97%B6%E5%90%8C%E6%AD%A5" rel="nofollow">定时同步</a>一样</p> <p>使用<code>force_checksum</code>命令行参数强制启用校验和来比较文件是否相等，就跟<a href="#%E6%9C%AC%E5%9C%B0%E7%A3%81%E7%9B%98" rel="nofollow">本地磁盘</a>一样</p> <p><code>source</code>命令行参数详见<a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%95%B0%E6%8D%AE%E6%BA%90%E5%8D%8F%E8%AE%AE" rel="nofollow">远程磁盘服务端数据源协议</a></p> <pre><code class="language-bash"># 启动一个远程磁盘客户端 # 请将`users`命令行参数替换为上面设置的实际账户名密码 $ gofs -source="rs://127.0.0.1:8105" -dest=./dest -users="gofs|password"</code></pre> <h3 id="远程推送服务端">远程推送服务端</h3> <p>启动一个<a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E6%9C%8D%E5%8A%A1%E7%AB%AF" rel="nofollow">远程磁盘服务端</a>作为一个远程文件数据源，并使用<code>push_server</code>命令行参数启用远程推送服务端</p> <p>注意远程推送服务端的用户至少要拥有读写权限，例如：<code>-users="gofs|password|rw"</code></p> <pre><code class="language-bash"># 启动一个远程磁盘服务端并启用远程推送服务端 # 在生产环境中请将`tls_cert_file`和`tls_key_file`命令行参数替换为正式的证书和密钥文件 # 为了安全起见，请使用复杂的账户密码来设置`users`命令行参数 $ gofs -source="rs://127.0.0.1:8105?mode=server&amp;local_sync_disabled=true&amp;path=./source&amp;fs_server=https://127.0.0.1" -dest=./dest -users="gofs|password|rw" -tls_cert_file=cert.pem -tls_key_file=key.pem -push_server</code></pre> <h3 id="远程推送客户端">远程推送客户端</h3> <p>启动一个远程推送客户端将本地文件变更同步到<a href="#%E8%BF%9C%E7%A8%8B%E6%8E%A8%E9%80%81%E6%9C%8D%E5%8A%A1%E7%AB%AF" rel="nofollow">远程推送服务端</a></p> <p>使用<code>chunk_size</code>命令行参数来设置大文件上传时切分的区块大小，默认值为<code>1048576</code>，即<code>1MB</code></p> <p>你可以使用<code>checkpoint_count</code>命令行参数就跟<a href="#%E6%9C%AC%E5%9C%B0%E7%A3%81%E7%9B%98" rel="nofollow">本地磁盘</a>一样</p> <p>更多命令行参数用法请参见<a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E5%AE%A2%E6%88%B7%E7%AB%AF" rel="nofollow">远程磁盘客户端</a></p> <pre><code class="language-bash"># 启动一个远程推送客户端并且启用本地磁盘同步，将source目录下的文件变更同步到本地dest目录和远程推送服务器上 # 请将`users`命令行参数替换为上面设置的实际账户名密码 $ gofs -source="./source" -dest="rs://127.0.0.1:8105?local_sync_disabled=false&amp;path=./dest" -users="gofs|password"</code></pre> <h3 id="远程磁盘服务端数据源协议">远程磁盘服务端数据源协议</h3> <p>远程磁盘服务端数据源协议基于URI基本语法,详见<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://www.rfc-editor.org/rfc/rfc3986.html"  target="_blank" rel="nofollow">RFC 3986</a></p> <h4 id="方案">方案</h4> <p>方案名称为<code>rs</code></p> <h4 id="主机名">主机名</h4> <p>远程磁盘服务端数据源在<a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E6%9C%8D%E5%8A%A1%E7%AB%AF" rel="nofollow">远程磁盘服务端</a>模式下使用<code>0.0.0.0</code>或者其他本地网卡IP地址作为主机名，在<a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E5%AE%A2%E6%88%B7%E7%AB%AF" rel="nofollow">远程磁盘客户端</a><br /> 模式下使用远程磁盘服务端的IP地址或者域名作为主机名</p> <h4 id="端口号">端口号</h4> <p>远程磁盘服务端数据源端口号，默认为<code>8105</code></p> <h4 id="参数">参数</h4> <p>仅在<a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E6%9C%8D%E5%8A%A1%E7%AB%AF" rel="nofollow">远程磁盘服务端</a>模式下设置以下参数</p> <ul> <li><code>path</code><a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E6%9C%8D%E5%8A%A1%E7%AB%AF" rel="nofollow">远程磁盘服务端</a>真实的本地源目录</li> <li><code>mode</code> 指定运行模式，只有在<a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E6%9C%8D%E5%8A%A1%E7%AB%AF" rel="nofollow">远程磁盘服务端</a>模式下需要手动指定为<code>server</code>，默认为<a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E5%AE%A2%E6%88%B7%E7%AB%AF" rel="nofollow">远程磁盘客户端</a>模式</li> <li><code>fs_server</code><a href="#web%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8" rel="nofollow">Web文件服务器</a>地址，例如<code>https://127.0.0.1</code></li> <li><code>local_sync_disabled</code> 是否将<a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E6%9C%8D%E5%8A%A1%E7%AB%AF" rel="nofollow">远程磁盘服务端</a>的文件变更同步到远程本地的目标目录,可选值为<code>true</code>或<code>false</code>，默认值为<code>false</code></li> </ul> <h4 id="示例">示例</h4> <p><a href="#%E8%BF%9C%E7%A8%8B%E7%A3%81%E7%9B%98%E6%9C%8D%E5%8A%A1%E7%AB%AF" rel="nofollow">远程磁盘服务端</a>模式下的示例</p> <pre><code class="language-text"> rs://127.0.0.1:8105?mode=server&amp;local_sync_disabled=true&amp;path=./source&amp;fs_server=https://127.0.0.1  \_/  \_______/ \__/ \____________________________________________________________________________/   |       |       |                                      |  方案   主机名   端口号                                    参数</code></pre> <h3 id="管理接口">管理接口</h3> <p>基于<a href="#web%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8" rel="nofollow">Web文件服务器</a>的应用管理接口</p> <p>默认情况下，仅允许私有地址和回环地址访问管理接口的相关路由</p> <p>你可以通过将<code>manage_private</code>命令行参数设置为<code>false</code>来禁用默认行为，允许公网IP访问管理接口的路由</p> <pre><code class="language-bash">$ gofs -source=./source -dest=./dest -server -tls_cert_file=cert.pem -tls_key_file=key.pem -rand_user_count=3 -manage</code></pre> <h4 id="性能分析接口">性能分析接口</h4> <p>pprof访问地址如下：</p> <pre><code class="language-text">https://127.0.0.1/manage/pprof/</code></pre> <h4 id="配置接口">配置接口</h4> <p>读取应用程序配置，默认返回<code>json</code>格式，当前支持<code>json</code>和<code>yaml</code>格式</p> <pre><code class="language-text">https://127.0.0.1/manage/config</code></pre> <p>或者使用<code>format</code>参数来指定返回的配置格式</p> <pre><code class="language-text">https://127.0.0.1/manage/config?format=yaml</code></pre> <h4 id="报告接口">报告接口</h4> <p>使用<code>report</code>命令行参数来启用报告接口的路由并且开始收集报告数据，需要先启用<code>manage</code>命令行参数</p> <p>报告接口详情参见<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://github.com/no-src/gofs/tree/main/server/README.md#report-api"  target="_blank" rel="nofollow">Report API</a></p> <pre><code class="language-text">https://127.0.0.1/manage/report</code></pre> <h3 id="日志">日志</h3> <p>默认情况下会启用文件日志与控制台日志，你可以将<code>log_file</code>命令行参数设置为<code>false</code>来禁用文件日志</p> <p>使用<code>log_level</code>命令行参数设置日志的等级，默认级别是<code>INFO</code>，可选项为：<code>DEBUG=0</code><code>INFO=1</code><code>WARN=2</code><code>ERROR=3</code></p> <p>使用<code>log_dir</code>命令行参数来设置日志文件目录，默认为<code>./logs/</code></p> <p>使用<code>log_flush</code>命令行参数来设置自动刷新日志到文件中，默认启用</p> <p>使用<code>log_flush_interval</code>命令行参数设置自动刷新日志到文件中的频率，默认为<code>3s</code></p> <p>使用<code>log_event</code>命令行参数启用事件日志，所有事件都会记录到文件中，默认为禁用</p> <p>使用<code>log_sample_rate</code>命令行参数设置采样日志的采样率，取值范围为0到1，默认值为<code>1</code></p> <pre><code class="language-bash"># 在"本地磁盘"模式下设置日志信息 $ gofs -source=./source -dest=./dest -log_file -log_level=0 -log_dir="./logs/" -log_flush -log_flush_interval=3s -log_event</code></pre> <h3 id="使用配置文件">使用配置文件</h3> <p>如果需要的话，你可以使用配置文件来代替所有的命令行参数，当前支持<code>json</code>和<code>yaml</code>格式</p> <p>所有的配置字段名称跟命令行参数一样，你可以参考<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://github.com/no-src/gofs/tree/main/conf/example"  target="_blank" rel="nofollow">配置示例</a>或者<a href="#%E9%85%8D%E7%BD%AE%E6%8E%A5%E5%8F%A3" rel="nofollow">配置接口</a>的响应结果</p> <pre><code class="language-bash">$ gofs -conf=./gofs.yaml</code></pre> <h3 id="校验和">校验和</h3> <p>你可以使用<code>checksum</code>命令行参数来计算并打印文件的校验和</p> <p><code>chunk_size</code>和<code>checkpoint_count</code>命令行参数在这里同在<a href="#%E6%9C%AC%E5%9C%B0%E7%A3%81%E7%9B%98" rel="nofollow">本地磁盘</a>中一样有效</p> <pre><code class="language-bash">$ gofs -source=./gofs -checksum</code></pre> <h2 id="更多信息">更多信息</h2> <h3 id="帮助信息">帮助信息</h3> <pre><code class="language-bash">$ gofs -h</code></pre> <h3 id="版本信息">版本信息</h3> <pre><code class="language-bash">$ gofs -v</code></pre> <h3 id="关于信息">关于信息</h3> <pre><code class="language-bash">$ gofs -about</code></pre> 			                                            <div class="col-md-12 mt-5">
                                                                                                <p>上一个：<a href="/html/category/article-3045.htm">mybatis mysql 多租户_详解基于Mybatis-plus多租户实现方案</a></p>
                                                                                                <p>下一个：<a href="/html/category/article-3047.htm">关于Postman调试@RequestBody入参模式接口的用例说明</a></p>
                                                                                            </div>
                                                                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">热门文章</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2"><a href="/html/category/article-3082.htm" title="vue elementui点击按钮新增输入框">vue elementui点击按钮新增输入框</a></li>
                        <li class="py-2"><a href="/html/category/article-3086.htm" title="基于Apache Hudi和Debezium构建CDC入湖管道">基于Apache Hudi和Debezium构建CDC入湖管道</a></li>
                        <li class="py-2"><a href="/html/category/article-3071.htm" title="springboot中emoji表情配置及springboot数据源配置区别">springboot中emoji表情配置及springboot数据源配置区别</a></li>
                        <li class="py-2"><a href="/html/category/article-3117.htm" title="redis在CentOs服务器上的安装和设置开机自启动">redis在CentOs服务器上的安装和设置开机自启动</a></li>
                        <li class="py-2"><a href="/html/category/article-3079.htm" title="在Git中进行忽略文件操作详解_在线工具">在Git中进行忽略文件操作详解_在线工具</a></li>
                        <li class="py-2"><a href="/html/category/article-3108.htm" title="【远程文件浏览器】Unity+Lua开发调试利器">【远程文件浏览器】Unity+Lua开发调试利器</a></li>
                        <li class="py-2"><a href="/html/category/article-3103.htm" title="Oracle with使用方法以及递归">Oracle with使用方法以及递归</a></li>
                        <li class="py-2"><a href="/html/category/article-3096.htm" title="win11系统如何修改日期格式">win11系统如何修改日期格式</a></li>
                        <li class="py-2"><a href="/html/category/article-3083.htm" title="kafka消费者执行异常重复消费_Kafka消费者的使用和原理">kafka消费者执行异常重复消费_Kafka消费者的使用和原理</a></li>
                        <li class="py-2"><a href="/html/category/article-3142.htm" title="Git恢复之前版本的两种方法reset、revert（图文详解）">Git恢复之前版本的两种方法reset、revert（图文详解）</a></li>
                    </ul>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">归纳</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">52</span> <a href="/html/date/2024-06/" title="2024-06 归档">2024-06</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">62</span> <a href="/html/date/2024-05/" title="2024-05 归档">2024-05</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">60</span> <a href="/html/date/2024-04/" title="2024-04 归档">2024-04</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">62</span> <a href="/html/date/2024-03/" title="2024-03 归档">2024-03</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">44</span> <a href="/html/date/2024-02/" title="2024-02 归档">2024-02</a></h4>
            </li>
                    </ul>
    </div>
</div>


                </div>
            </div>
        </div>
    </div>
    <!-- End Blog -->
        <!-- Star Footer
    ============================================= -->
    <footer class="bg-dark text-light">
        <!-- Footer Bottom -->
        <div class="footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <p>
                            Oman Address 版权所有
                            <br />
                            Powered by WordPress
                        </p>
                    </div>
                    <div class="col-lg-6 text-right link">
                        <ul>
                            <li>
                                <a href="#">Terms</a>
                            </li>
                            <li>
                                <a href="#">Privacy</a>
                            </li>
                            <li>
                                <a href="#">Support</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Footer Bottom -->
    </footer>
    <!-- End Footer-->

    <!-- jQuery Frameworks
    ============================================= -->
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/jquery-1.12.4.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/popper.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/bootstrap.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/jquery.appear.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/jquery.easing.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/jquery.magnific-popup.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/modernizr.custom.13711.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/owl.carousel.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/wow.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/progress-bar.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/isotope.pkgd.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/imagesloaded.pkgd.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/count-to.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/YTPlayer.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/jquery.nice-select.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/loopcounter.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/bootsnav.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/omanaddress/main.js"></script>
    <script>
    $(function() {
        $('.js_to').click(function() {
            var url = $(this).data('url');
            var code = $(this).data('code');
            url += code;

            window.open(url);
        })
    });
    </script>
</body>

</html>